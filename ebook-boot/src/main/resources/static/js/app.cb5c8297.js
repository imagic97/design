(function(t){function e(e){for(var i,s,c=e[0],a=e[1],u=e[2],h=0,f=[];h<c.length;h++)s=c[h],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&f.push(o[s][0]),o[s]=0;for(i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i]);l&&l(e);while(f.length)f.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],i=!0,c=1;c<n.length;c++){var a=n[c];0!==o[a]&&(i=!1)}i&&(r.splice(e--,1),t=s(s.s=n[0]))}return t}var i={},o={app:0},r=[];function s(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=i,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(n,i,function(e){return t[e]}.bind(null,i));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],a=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var l=a;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var i=n("85ec"),o=n.n(i);o.a},"067b":function(t,e,n){"use strict";var i=n("d3b3"),o=n.n(i);o.a},"1db0":function(t,e,n){},"53ab":function(t,e,n){"use strict";var i=n("ec70"),o=n.n(i);o.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("a026"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("reading")],1)},r=[],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"reading"}},[n("book-reader"),n("book-menu"),n("book-content"),n("book-theme")],1)},c=[],a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{key:t.content,staticClass:"renderTargetContainer",on:{click:function(e){return t.setMenuShowOrHide()}}},[n("div",{staticClass:"chapterContainer"},[n("div",{directives:[{name:"lazy-container",rawName:"v-lazy-container",value:{selector:"img"},expression:"{ selector: 'img' }"}],style:{fontSize:t.fontSize+"px",lineHeight:1.8*t.fontSize+"px"},attrs:{id:"text"},domProps:{innerHTML:t._s(t.responseText)}}),n("div",{staticClass:"nextChapterContainner"},[n("div",{staticClass:"nextChapter"},[""!=t.responseText&&this.keyInContent+1<this.contentList.length?n("el-button",{attrs:{type:"primary"},on:{click:function(e){return e.stopPropagation(),t.toNextChapter(e)}}},[t._v("下一章")]):t._e()],1)])]),n("div")])},u=[],l=(n("c975"),n("fb6a"),n("4d63"),n("ac1f"),n("25f0"),n("5319"),n("841c"),n("bc3a")),h=n.n(l);function f(t,e){return h()({method:"GET",url:"/read/view",params:{file:t,href:e}})}function d(t){return h()({method:"GET",url:"/read/content",params:{file:t}})}function m(t){return h()({method:"GET",url:"/read/css",params:{file:t}})}n("a4d3"),n("4de4"),n("4160"),n("e439"),n("dbb4"),n("b64b"),n("159b");var p=n("ade3"),b=n("2f62"),S="/read/view?file=",C="/read/cover?file=",v="/read/css?file=";function T(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function O(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?T(Object(n),!0).forEach((function(e){Object(p["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var g={computed:O({},Object(b["c"])(["fileName","bookID","content","position","nextPosition","contentShow","contentList","menuShow","keyInContent","fontSize","menuVisible"])),data:function(){return{API_TO_GET_VIEW:S,API_TO_GET_COVER:C,API_TO_GET_CSS:v}},methods:O({},Object(b["b"])(["setFileName","setBookID","setContent","setPosition","setNextPosition","setContentShow","setContentList","setMenuShow","setKeyInContent","setFontSize","setMenuVisible"]),{setMenuShowOrHide:function(){this.setMenuShow(-1),this.setMenuVisible(!this.menuVisible)}})},E={mixins:[g],data:function(){return{ifUpdate:"",responseText:"",chapterCSS:""}},updated:function(){1!=this.ifUpdate?this.init():this.ifUpdate=!1},mounted:function(){this.init()},methods:{init:function(){var t=this;""==this.content&&this.contentList.length>0&&(this.setContent=this.contentLiset[0].url),""!=this.bookID&&""!=this.content&&f(this.bookID,this.content).then((function(e){t.responseText=t.letslazyload(t.handleText(e.data)),t.ifUpdate=!0})),""==this.chapterCSS&&m(this.bookID).then((function(e){if(200==e.data.code){t.chapterCSS=e.data.result,t.chapterCSS=".chapterContiner "+t.chapterCSS.replace(/}/gi,"}.chapterContainer "),t.chapterCSS=t.chapterCSS.replace(/\r\n/gi,"");var n=document.getElementById("chapterCSS");null!=n&&n.parentNode.removeChild(n),t.CreateStyle()}}))},letslazyload:function(t){var e=new RegExp(/(<img )([^>]*)(src=")([^"]*")([^>]*)(>)/,"g");return t=t.replace(e,(function(t,e,n,i,o,r,s){return e+n+'data-src="'+o+r+s})),t},CreateStyle:function(){var t=document.createElement("style");t.setAttribute("type","text/css"),t.setAttribute("id","chapterCSS"),t.innerText=this.chapterCSS,document.getElementsByTagName("head")[0].appendChild(t)},handleText:function(t){return t=t.slice(t.indexOf("<body")),""!=this.position&&t.search(this.position)>-1&&(t=t.slice(t.indexOf(this.position)-8)),t.search(this.nextPosition)>=0&&""!==this.nextPosition&&this.nextPosition!=this.position&&(t=t.slice(0,t.indexOf(this.nextPosition)-8)),t=t.slice(0,t.indexOf("</body>")),t.search('src="../')>-1?t=t.replace(/src="..\/Images\//gi,'src="'+this.API_TO_GET_VIEW+this.bookID+"&href="):t.search('src="')>-1&&(t=t.replace(/src="/gi,'src="'+this.API_TO_GET_VIEW+this.bookID+"&href=")),t},toNextChapter:function(){var t=this.keyInContent+1;t>=this.contentList.length||(this.setContent(this.contentList[t].url),this.setKeyInContent(t))}}},_=E,k=(n("92d7"),n("2877")),w=Object(k["a"])(_,a,u,!1,null,"5a939558",null),y=w.exports,x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.menuVisible,expression:"menuVisible"}],staticClass:"readerControls"},[n("el-row",{attrs:{gutter:0}},[n("el-col",{attrs:{span:6}},[n("div",{staticClass:"readerControls_item readerControls_item1",class:{selected:3===t.menuShow},on:{click:function(e){return t.showSetting(3)}}},[n("span",{staticClass:"title"},[t._v("书签")])])]),n("el-col",{attrs:{span:6}},[n("div",{staticClass:"readerControls_item readerControls_item2",class:{selected:2===t.menuShow},on:{click:function(e){return t.showSetting(2)}}},[n("span",{staticClass:"title"},[t._v("主题")])])]),n("el-col",{attrs:{span:6}},[n("div",{staticClass:"readerControls_item readerControls_item3",class:{selected:1===t.menuShow},on:{click:function(e){return t.showSetting(1)}}},[n("span",{staticClass:"title"},[t._v("目录")])])]),n("el-col",{attrs:{span:6}},[n("div",{staticClass:"readerControls_item readerControls_item4",class:{selected:0===t.menuShow},on:{click:function(e){return t.showSetting(0)}}},[n("span",{staticClass:"title"},[t._v("回到主页")])])])],1)],1)},I=[],N={mixins:[g],methods:{showSetting:function(t){this.setMenuShow(t)}}},P=N,L=(n("53ab"),Object(k["a"])(P,x,I,!1,null,"785e08d8",null)),j=L.exports,z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.menuVisible&&1===t.menuShow,expression:"menuVisible && menuShow === 1"}],staticClass:"content"},[n("div",{staticClass:"contentCatalog"},[n("ul",{staticClass:"contentCatalog_list"},t._l(t.contentList,(function(e,i){return n("li",{key:i,staticClass:"chapterItem",on:{click:function(n){return t.ContentToReader(e,i)}}},[n("span",{class:{listSelected:t.isCurrentContent(e.url)}},[t._v(t._s(e.title))])])})),0)])])},M=[],V={mixins:[g],data:function(){return{}},mounted:function(){this.init()},methods:{isCurrentContent:function(t){return this.content===t},setCurrentComponentHide:function(){this.setCurrentComponent(null)},init:function(){var t=this;d(this.bookID).then((function(e){null!=e.data.result?(t.getJsonList(e.data.result.children),""==t.content&&t.setContent(t.contentList[0].url)):t.contentList="目录为空哦"}))},getJsonList:function(t){for(var e=0;e<t.length;e++)this.contentList.push({title:t[e].title,url:t[e].url}),t[e].children.length>0&&this.getJsonList(t[e].children)},ContentToReader:function(t,e){if(""!=t.url){this.key=e;var n="",i="";t.url.search("#")>0&&(n=t.url.slice(t.url.indexOf("#")+1,t.url.length)),e+1<this.contentList.length&&this.contentList[e+1].url.search("#")>0&&(i=this.contentList[e+1].url.slice(this.contentList[e+1].url.indexOf("#")+1,this.contentList[e+1].url.length)),this.content!=t.url|this.position!=n&&(this.setContent(t.url),this.setPosition(n),this.setNextPosition(i),this.setKeyInContent(e)),this.setMenuShowOrHide()}}}},D=V,A=(n("b12a"),Object(k["a"])(D,z,M,!1,null,"5a8c732f",null)),F=A.exports,B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.menuVisible&&2===t.menuShow,expression:"menuVisible && menuShow === 2"}],staticClass:"themeControl"},[n("div",[n("el-row",[n("el-col",{attrs:{span:12}},[n("div",{staticClass:"theme theme-dark",class:{currentTheme:t.isCurrentTheme("dark")},on:{click:function(e){return t.setCurrentTheme("dark")}}})]),n("el-col",{attrs:{span:12}},[n("div",{staticClass:"theme theme-light",class:{currentTheme:t.isCurrentTheme("light")},on:{click:function(e){return t.setCurrentTheme("light")}}})])],1)],1),n("div",{staticClass:"fontSize"},[n("el-slider",{attrs:{min:10,max:34,"show-tooltip":!1,step:6,"show-stops":"",marks:t.marks},model:{value:t.zitiSize,callback:function(e){t.zitiSize=e},expression:"zitiSize"}})],1)])},H=[];function $(t){var e=document.createElement("link");e.setAttribute("rel","stylesheet"),e.setAttribute("type","text/css"),e.setAttribute("href",t),document.getElementsByTagName("head")[0].appendChild(e)}function G(t){for(var e=document.getElementsByTagName("link"),n=e.length;n>=0;n--)e[n]&&null!=e[n].getAttribute("href")&&-1!==e[n].getAttribute("href").indexOf(t)&&e[n].parentNode.removeChild(e[n])}var K={mixins:[g],data:function(){return{currentTheme:"light",marks:{10:{style:{fontSize:"10px",color:"#1989FA"},label:this.$createElement("strong","A")},34:{style:{fontSize:"34px",color:"#1989FA"},label:this.$createElement("strong","A")}}}},computed:{zitiSize:{get:function(){return this.fontSize},set:function(t){this.setFontSize(t)}}},methods:{setCurrentTheme:function(t){"dark"===t?(G("theme/light.css"),$("theme/dark.css")):(G("theme/dark.css"),$("theme/light.css")),this.currentTheme=t},isCurrentTheme:function(t){return this.currentTheme===t}}},U=K,W=(n("067b"),Object(k["a"])(U,B,H,!1,null,"3401dd84",null)),J=W.exports,R={mixins:[g],components:{bookReader:y,bookMenu:j,bookContent:F,bookTheme:J},data:function(){return{}}},X=R,Y=(n("9110"),Object(k["a"])(X,s,c,!1,null,"233be417",null)),Z=Y.exports,q={name:"app",components:{reading:Z}},Q=q,tt=(n("034f"),Object(k["a"])(Q,o,r,!1,null,null,null)),et=tt.exports,nt={state:{fileName:"",bookID:"1.epub",content:"",position:"",nextPosition:"",contentShow:!1,contentList:[],menuShow:-1,keyInContent:0,menuVisible:!1,fontSize:16},mutations:{SET_FILENAME:function(t,e){t.fileName=e},SET_BOOKID:function(t,e){t.bookID=e},SET_CONTENT:function(t,e){t.content=e},SET_POSITION:function(t,e){t.position=e},SET_NEXTPOSITION:function(t,e){t.nextPosition=e},SET_CONTENTSHOW:function(t,e){t.contentShow=e},SET_CONTENTLIST:function(t,e){t.contentList=e},SET_MENUSHOW:function(t,e){t.menuShow=e},SET_KEYINCONTENT:function(t,e){t.keyInContent=e},SET_FONTSIZE:function(t,e){t.fontSize=e},SET_MENUVISIBLE:function(t,e){t.menuVisible=e}}},it=nt,ot={fileName:function(t){return t.book.fileName},bookID:function(t){return t.book.bookID},content:function(t){return t.book.content},position:function(t){return t.book.position},nextPosition:function(t){return t.book.nextPosition},contentShow:function(t){return t.book.contentShow},contentList:function(t){return t.book.contentList},menuShow:function(t){return t.book.menuShow},currentComponent:function(t){return t.book.currentComponent},fontSize:function(t){return t.book.fontSize},menuVisible:function(t){return t.book.menuVisible},keyInContent:function(t){return t.book.keyInContent}},rt=ot,st={setFileName:function(t,e){var n=t.commit;return n("SET_FILENAME",e)},setBookID:function(t,e){var n=t.commit;return n("SET_BOOKID",e)},setContent:function(t,e){var n=t.commit;return n("SET_CONTENT",e)},setPosition:function(t,e){var n=t.commit;return n("SET_POSITION",e)},setNextPosition:function(t,e){var n=t.commit;return n("SET_NEXTPOSITION",e)},setContentShow:function(t,e){var n=t.commit;return n("SET_CONTENTSHOW",e)},setContentList:function(t,e){var n=t.commit;return n("SET_CONTENTLIST",e)},setMenuShow:function(t,e){var n=t.commit;return n("SET_MENUSHOW",e)},setKeyInContent:function(t,e){var n=t.commit;return n("SET_KEYINCONTENT",e)},setFontSize:function(t,e){var n=t.commit;return n("SET_FONTSIZE",e)},setMenuVisible:function(t,e){var n=t.commit;return n("SET_MENUVISIBLE",e)}},ct=st;i["default"].use(b["a"]);var at=new b["a"].Store({modules:{book:it},getters:rt,actions:ct}),ut=n("caf9"),lt=n("5c96"),ht=n.n(lt);n("0fae");i["default"].config.productionTip=!1,i["default"].use(ht.a),i["default"].use(ut["a"],{error:n("e429"),loading:n("e429")}),new i["default"]({store:at,render:function(t){return t(et)}}).$mount("#app")},"85ec":function(t,e,n){},9110:function(t,e,n){"use strict";var i=n("cf18"),o=n.n(i);o.a},"92d7":function(t,e,n){"use strict";var i=n("1db0"),o=n.n(i);o.a},"932d":function(t,e,n){},b12a:function(t,e,n){"use strict";var i=n("932d"),o=n.n(i);o.a},cf18:function(t,e,n){},d3b3:function(t,e,n){},e429:function(t,e,n){t.exports=n.p+"img/image.edcf6801.png"},ec70:function(t,e,n){}});
//# sourceMappingURL=app.cb5c8297.js.map