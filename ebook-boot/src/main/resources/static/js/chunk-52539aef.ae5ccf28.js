(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-52539aef"],{"1f86":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"self_view"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.uploadShow,expression:"!uploadShow"}],staticClass:"book_self"},[i("self-nav"),i("book-self",{on:{showUpload:e.getIsUploadShow}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:e.uploadShow,expression:"uploadShow"}],staticClass:"upload"},[i("upload-file",{on:{hideUpload:e.getIsUploadShow}})],1)])},o=[],s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"userBookSelfContainer"},[i("div",{staticClass:"bookSelf"},[e._l(e.bookSelfList,(function(t,n){return i("div",{key:n,staticClass:"bookSelfList",on:{click:function(i){e.selectedMode?e.selectBook(n):e.toReaderBook(t)}}},[i("div",{staticClass:"bookCover"},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.API_TO_GET_COVER+t.fileName,expression:"API_TO_GET_COVER + item.fileName"}],key:t.bookID,staticClass:"bookCover_img"}),i("div",{directives:[{name:"show",rawName:"v-show",value:e.selectedMode,expression:"selectedMode"}],staticClass:"iconfont icon-selected",class:{selected:t.isSelected}}),i("div",{staticClass:"book_cover_boder"})]),i("div",{staticClass:"title"},[e._v(e._s(t.title?t.title:"无书名"))])])})),i("span",{staticClass:"addBook placeholder",on:{click:function(t){return e.showUpload()}}}),e._l(e.placeholder,(function(e){return i("div",{key:"num-"+e,staticClass:"placeholder"})}))],2)])},a=[],l=(i("a4d3"),i("e01a"),i("d28b"),i("a434"),i("d3b7"),i("3ca3"),i("ddb0"),i("4e3c")),c=i("4ec3"),r=i("a026"),d=new r["a"],u=d,f=i("8544"),v=i.n(f),h={mixins:[l["a"]],data:function(){return{selectedMode:!1,placeholder:4}},watch:{isLogin:function(){""==this.isLogin&&(this.bookSelfList=[])}},mounted:function(){var e=this;u.$on("SELECTMODE",(function(t){e.selectedMode=t,!1===t&&e.selectCancel(e.bookSelfList)})),u.$on("DELETEBOOK",(function(t){!0===t&&e.deleteBook(e.bookSelfList)}));var t=window.innerWidth>870?850:window.innerWidth;this.placeholder=parseInt(t/150)-1,this.init()},methods:{init:function(){var e=this;null!=this.isLogin&&0==this.bookSelfList.length&&Object(c["f"])().then((function(t){if(200==t.data.code){var i=!0,n=!1,o=void 0;try{for(var s,a=t.data.result[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;l.isSelected=!1,e.bookSelfList.push(l)}}catch(c){n=!0,o=c}finally{try{i||null==a.return||a.return()}finally{if(n)throw o}}}}))},toReaderBook:function(e){this.setBookID(e.fileName),this.setFileName(e.title),this.$router.push({path:"/book-reader"})},showUpload:function(){this.$emit("showUpload",!0)},selectBook:function(e){this.bookSelfList[e].isSelected=!this.bookSelfList[e].isSelected},deleteBook:function(e){for(var t=e.length-1;t>=0;t-=1)!0===e[t].isSelected&&(0===e[t].selfId?Object(c["a"])(e[t].bookId,e[t].fileName):Object(c["b"])(e[t].selfId),v.a.delete(e[t].fileName),e.splice(t,1));return e},selectCancel:function(e){var t=!0,i=!1,n=void 0;try{for(var o,s=e[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){var a=o.value;a.isSelected=!1}}catch(l){i=!0,n=l}finally{try{t||null==s.return||s.return()}finally{if(i)throw n}}return e}}},p=h,b=(i("41e7"),i("2877")),m=Object(b["a"])(p,s,a,!1,null,"6c0cb605",null),g=m.exports,S=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"slef_nav"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.isSelectMode,expression:"!isSelectMode"}],staticClass:"type no_select"},[i("div",{staticClass:"nav nav_left"}),i("div",{staticClass:"nav nav_center"},[e._v("书架")]),i("div",{staticClass:"nav nav_right",on:{click:e.selectMode}},[e._v("编辑")])]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isSelectMode,expression:"isSelectMode"}],staticClass:"type select"},[i("div",{staticClass:"nav nav_left",on:{click:e.deleteBook}},[e._v("删除")]),i("div",{staticClass:"nav nav_center"},[e._v("书架")]),i("div",{staticClass:"nav nav_right",on:{click:e.selectMode}},[e._v("取消")])])])},w=[],k={data:function(){return{isSelectMode:!1}},methods:{selectMode:function(){this.isSelectMode=!this.isSelectMode,u.$emit("SELECTMODE",this.isSelectMode)},deleteBook:function(){u.$emit("DELETEBOOK",!0)}}},_=k,y=(i("2d0c"),Object(b["a"])(_,S,w,!1,null,"8f13245e",null)),C=y.exports,x=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"upload_file"},[i("h3",[e._v("上传电子书")]),i("div",{ref:"message",attrs:{id:"message"},on:{click:function(t){return e.cancel()}}},[e._v(e._s(e.message))]),i("input",{ref:"file",attrs:{type:"file",id:"file"},on:{change:function(t){return e.getFile(t)}}}),i("button",{staticClass:"btn",on:{click:function(t){return e.selectFile()}}},[e._v("选择电子书")]),i("button",{staticClass:"btn btn-upload",on:{click:function(t){return e.uploadFile()}}},[e._v("上传")]),i("button",{staticClass:"btn btn-cancel",on:{click:function(t){return e.hide()}}},[e._v("取消")])])},E=[],M=(i("b0c0"),{data:function(){return{message:"限制大小为20M",file:null}},methods:{selectFile:function(){this.$refs.file.click()},getFile:function(){var e=event.target.files;if(0!=e.length){if("application/epub+zip"!=e[0].type)return this.message="只支持epub格式哦",void(this.$refs.message.style.color="red");if(e[0].size>20971520)return this.message="文件大小超过限制",void(this.$refs.message.style.color="red");this.file=e[0],console.log(this.file),this.$refs.message.style.color="",this.message=e[0].name}},uploadFile:function(){var e=this;if(null==this.file)return this.message="请选择文件上传",void(this.$refs.message.style.color="red");Object(c["k"])(this.file).then((function(t){200==t.data.code?(e.message="上传成功",e.file=null):e.message=t.data.message}))},cancel:function(){this.file=null,this.message=""},hide:function(){this.cancel(),this.$emit("hideUpload",!1)}}}),O=M,$=(i("d1b0"),Object(b["a"])(O,x,E,!1,null,"393d2284",null)),L=$.exports,I={mixins:[l["a"]],components:{bookSelf:g,selfNav:C,uploadFile:L},data:function(){return{uploadShow:!1}},methods:{getIsUploadShow:function(e){this.uploadShow=e},hideUpload:function(){this.uploadShow=!1}}},B=I,N=(i("642e"),Object(b["a"])(B,n,o,!1,null,"eb1201dc",null));t["default"]=N.exports},"2d0c":function(e,t,i){"use strict";var n=i("de15"),o=i.n(n);o.a},"3ca3":function(e,t,i){"use strict";var n=i("6547").charAt,o=i("69f3"),s=i("7dd0"),a="String Iterator",l=o.set,c=o.getterFor(a);s(String,"String",(function(e){l(this,{type:a,string:String(e),index:0})}),(function(){var e,t=c(this),i=t.string,o=t.index;return o>=i.length?{value:void 0,done:!0}:(e=n(i,o),t.index+=e.length,{value:e,done:!1})}))},"41e7":function(e,t,i){"use strict";var n=i("a045"),o=i.n(n);o.a},5184:function(e,t,i){},"642e":function(e,t,i){"use strict";var n=i("5184"),o=i.n(n);o.a},6547:function(e,t,i){var n=i("a691"),o=i("1d80"),s=function(e){return function(t,i){var s,a,l=String(o(t)),c=n(i),r=l.length;return c<0||c>=r?e?"":void 0:(s=l.charCodeAt(c),s<55296||s>56319||c+1===r||(a=l.charCodeAt(c+1))<56320||a>57343?e?l.charAt(c):s:e?l.slice(c,c+2):a-56320+(s-55296<<10)+65536)}};e.exports={codeAt:s(!1),charAt:s(!0)}},8544:function(e,t){var i=window.localStorage;e.exports={set:function(e,t){i.setItem(e,t)},get:function(e){return i.getItem(e)},clear:function(){i.clear()},delete:function(e){i.removeItem(e)}}},a045:function(e,t,i){},a434:function(e,t,i){"use strict";var n=i("23e7"),o=i("23cb"),s=i("a691"),a=i("50c4"),l=i("7b0b"),c=i("65f0"),r=i("8418"),d=i("1dde"),u=i("ae40"),f=d("splice"),v=u("splice",{ACCESSORS:!0,0:0,1:2}),h=Math.max,p=Math.min,b=9007199254740991,m="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!f||!v},{splice:function(e,t){var i,n,d,u,f,v,g=l(this),S=a(g.length),w=o(e,S),k=arguments.length;if(0===k?i=n=0:1===k?(i=0,n=S-w):(i=k-2,n=p(h(s(t),0),S-w)),S+i-n>b)throw TypeError(m);for(d=c(g,n),u=0;u<n;u++)f=w+u,f in g&&r(d,u,g[f]);if(d.length=n,i<n){for(u=w;u<S-n;u++)f=u+n,v=u+i,f in g?g[v]=g[f]:delete g[v];for(u=S;u>S-n+i;u--)delete g[u-1]}else if(i>n)for(u=S-n;u>w;u--)f=u+n-1,v=u+i-1,f in g?g[v]=g[f]:delete g[v];for(u=0;u<i;u++)g[u+w]=arguments[u+2];return g.length=S-n+i,d}})},b0c0:function(e,t,i){var n=i("83ab"),o=i("9bf2").f,s=Function.prototype,a=s.toString,l=/^\s*function ([^ (]*)/,c="name";!n||c in s||o(s,c,{configurable:!0,get:function(){try{return a.call(this).match(l)[1]}catch(e){return""}}})},d1b0:function(e,t,i){"use strict";var n=i("eb98"),o=i.n(n);o.a},d28b:function(e,t,i){var n=i("746f");n("iterator")},ddb0:function(e,t,i){var n=i("da84"),o=i("fdbc"),s=i("e260"),a=i("9112"),l=i("b622"),c=l("iterator"),r=l("toStringTag"),d=s.values;for(var u in o){var f=n[u],v=f&&f.prototype;if(v){if(v[c]!==d)try{a(v,c,d)}catch(p){v[c]=d}if(v[r]||a(v,r,u),o[u])for(var h in s)if(v[h]!==s[h])try{a(v,h,s[h])}catch(p){v[h]=s[h]}}}},de15:function(e,t,i){},e01a:function(e,t,i){"use strict";var n=i("23e7"),o=i("83ab"),s=i("da84"),a=i("5135"),l=i("861d"),c=i("9bf2").f,r=i("e893"),d=s.Symbol;if(o&&"function"==typeof d&&(!("description"in d.prototype)||void 0!==d().description)){var u={},f=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof f?new d(e):void 0===e?d():d(e);return""===e&&(u[t]=!0),t};r(f,d);var v=f.prototype=d.prototype;v.constructor=f;var h=v.toString,p="Symbol(test)"==String(d("test")),b=/^Symbol\((.*)\)[^)]+$/;c(v,"description",{configurable:!0,get:function(){var e=l(this)?this.valueOf():this,t=h.call(e);if(a(u,e))return"";var i=p?t.slice(7,-1):t.replace(b,"$1");return""===i?void 0:i}}),n({global:!0,forced:!0},{Symbol:f})}},eb98:function(e,t,i){}}]);
//# sourceMappingURL=chunk-52539aef.ae5ccf28.js.map