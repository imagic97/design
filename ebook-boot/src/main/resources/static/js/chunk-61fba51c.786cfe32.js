(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-61fba51c"],{"1a83":function(t,e,n){},"25f0":function(t,e,n){"use strict";var i=n("6eeb"),s=n("825a"),r=n("d039"),o=n("ad6d"),a="toString",c=RegExp.prototype,l=c[a],u=r((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),h=l.name!=a;(u||h)&&i(RegExp.prototype,a,(function(){var t=s(this),e=String(t.source),n=t.flags,i=String(void 0===n&&t instanceof RegExp&&!("flags"in c)?o.call(t):n);return"/"+e+"/"+i}),{unsafe:!0})},"3e13":function(t,e,n){"use strict";var i=n("1a83"),s=n.n(i);s.a},"440a":function(t,e,n){"use strict";var i=n("a10b"),s=n.n(i);s.a},"44e7":function(t,e,n){var i=n("861d"),s=n("c6b6"),r=n("b622"),o=r("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==s(t))}},"46ee":function(t,e,n){},"4ac0":function(t,e,n){},"4d63":function(t,e,n){var i=n("83ab"),s=n("da84"),r=n("94ca"),o=n("7156"),a=n("9bf2").f,c=n("241c").f,l=n("44e7"),u=n("ad6d"),h=n("9f7f"),f=n("6eeb"),d=n("d039"),v=n("69f3").set,m=n("2626"),p=n("b622"),C=p("match"),g=s.RegExp,S=g.prototype,x=/a/g,b=/a/g,k=new g(x)!==x,_=h.UNSUPPORTED_Y,w=i&&r("RegExp",!k||_||d((function(){return b[C]=!1,g(x)!=x||g(b)==b||"/a/i"!=g(x,"i")})));if(w){var I=function(t,e){var n,i=this instanceof I,s=l(t),r=void 0===e;if(!i&&s&&t.constructor===I&&r)return t;k?s&&!r&&(t=t.source):t instanceof I&&(r&&(e=u.call(t)),t=t.source),_&&(n=!!e&&e.indexOf("y")>-1,n&&(e=e.replace(/y/g,"")));var a=o(k?new g(t,e):g(t,e),i?this:S,I);return _&&n&&v(a,{sticky:n}),a},y=function(t){t in I||a(I,t,{configurable:!0,get:function(){return g[t]},set:function(e){g[t]=e}})},O=c(g),E=0;while(O.length>E)y(O[E++]);S.constructor=I,I.prototype=S,f(s,"RegExp",I)}m("RegExp")},"4e85":function(t,e,n){},5319:function(t,e,n){"use strict";var i=n("d784"),s=n("825a"),r=n("7b0b"),o=n("50c4"),a=n("a691"),c=n("1d80"),l=n("8aa5"),u=n("14c3"),h=Math.max,f=Math.min,d=Math.floor,v=/\$([$&'`]|\d\d?|<[^>]*>)/g,m=/\$([$&'`]|\d\d?)/g,p=function(t){return void 0===t?t:String(t)};i("replace",2,(function(t,e,n,i){var C=i.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,g=i.REPLACE_KEEPS_$0,S=C?"$":"$0";return[function(n,i){var s=c(this),r=void 0==n?void 0:n[t];return void 0!==r?r.call(n,s,i):e.call(String(s),n,i)},function(t,i){if(!C&&g||"string"===typeof i&&-1===i.indexOf(S)){var r=n(e,t,this,i);if(r.done)return r.value}var c=s(t),d=String(this),v="function"===typeof i;v||(i=String(i));var m=c.global;if(m){var b=c.unicode;c.lastIndex=0}var k=[];while(1){var _=u(c,d);if(null===_)break;if(k.push(_),!m)break;var w=String(_[0]);""===w&&(c.lastIndex=l(d,o(c.lastIndex),b))}for(var I="",y=0,O=0;O<k.length;O++){_=k[O];for(var E=String(_[0]),P=h(f(a(_.index),d.length),0),T=[],L=1;L<_.length;L++)T.push(p(_[L]));var N=_.groups;if(v){var z=[E].concat(T,P,d);void 0!==N&&z.push(N);var R=String(i.apply(void 0,z))}else R=x(E,d,P,T,N,i);P>=y&&(I+=d.slice(y,P)+R,y=P+E.length)}return I+d.slice(y)}];function x(t,n,i,s,o,a){var c=i+t.length,l=s.length,u=m;return void 0!==o&&(o=r(o),u=v),e.call(a,u,(function(e,r){var a;switch(r.charAt(0)){case"$":return"$";case"&":return t;case"`":return n.slice(0,i);case"'":return n.slice(c);case"<":a=o[r.slice(1,-1)];break;default:var u=+r;if(0===u)return e;if(u>l){var h=d(u/10);return 0===h?e:h<=l?void 0===s[h-1]?r.charAt(1):s[h-1]+r.charAt(1):e}a=s[u-1]}return void 0===a?"":a}))}}))},"5f65":function(t,e,n){"use strict";var i=n("46ee"),s=n.n(i);s.a},6547:function(t,e,n){var i=n("a691"),s=n("1d80"),r=function(t){return function(e,n){var r,o,a=String(s(e)),c=i(n),l=a.length;return c<0||c>=l?t?"":void 0:(r=a.charCodeAt(c),r<55296||r>56319||c+1===l||(o=a.charCodeAt(c+1))<56320||o>57343?t?a.charAt(c):r:t?a.slice(c,c+2):o-56320+(r-55296<<10)+65536)}};t.exports={codeAt:r(!1),charAt:r(!0)}},7156:function(t,e,n){var i=n("861d"),s=n("d2bb");t.exports=function(t,e,n){var r,o;return s&&"function"==typeof(r=e.constructor)&&r!==n&&i(o=r.prototype)&&o!==n.prototype&&s(t,o),t}},8544:function(t,e){var n=window.localStorage;t.exports={set:function(t,e){n.setItem(t,e)},get:function(t){return n.getItem(t)},clear:function(){n.clear()},delete:function(t){n.removeItem(t)}}},8812:function(t,e,n){"use strict";var i=n("c766"),s=n.n(i);s.a},"8aa5":function(t,e,n){"use strict";var i=n("6547").charAt;t.exports=function(t,e,n){return e+(n?i(t,e).length:1)}},"9e8e":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"reading"},[n("book-reader"),n("book-menu"),n("book-content"),n("book-theme")],1)},s=[],r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"renderTargetContainer",on:{click:function(e){return t.setMenuShowOrHide()}}},[n("loading",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}]}),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.isLoading,expression:"!isLoading"}],staticClass:"chapterContainer"},[n("reader-context",{attrs:{responseHtml:t.responseHtml,fontSize:t.fontSize}}),n("div",{staticClass:"nextChapterContainner"},[n("div",{staticClass:"nextChapter"},[""!=t.responseHtml&&this.keyInContent+1<this.contentList.length?n("button",{attrs:{type:"primary"},on:{click:function(e){return e.stopPropagation(),t.toNextChapter(e)}}},[t._v(" 下一章 ")]):t._e()])])],1),n("div")],1)},o=[],a=(n("c975"),n("baa5"),n("fb6a"),n("4d63"),n("ac1f"),n("25f0"),n("5319"),n("841c"),n("4ec3")),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"lazy-container",rawName:"v-lazy-container",value:{selector:"img"},expression:"{ selector: 'img' }"}],style:{fontSize:t.fontSize+"px"},attrs:{id:"text"},domProps:{innerHTML:t._s(t.responseHtml)}})},l=[],u={props:{responseHtml:String,fontSize:String}},h=u,f=(n("ccbf"),n("2877")),d=Object(f["a"])(h,c,l,!1,null,"f1654a60",null),v=d.exports,m=n("bf93"),p=n("4e3c"),C=n("8544"),g=n.n(C),S={mixins:[p["a"]],components:{readerContext:v,loading:m["a"]},data:function(){return{isLoading:!0,responseHtml:"",chapterCSS:""}},watch:{content:function(){this.init()}},created:function(){var t;t=""===this.bookID?JSON.parse(g.a.get("currentRead")):JSON.parse(g.a.get(this.bookID)),null!=t&&this.parsingBook(t)},methods:{init:function(){var t=this;this.isLoading=!0,""==this.content&&this.contentList.length>0&&(this.setContent=this.contentLiset[0].url),""!=this.bookID&&""!=this.content&&Object(a["e"])(this.bookID,this.content).then((function(e){t.responseHtml=t.handleHtml(e.data),t.$nextTick((function(){t.isLoading=!1;var e=t.createBook();g.a.set(t.bookID,JSON.stringify(e)),g.a.set("currentRead",JSON.stringify(e))}))})),""==this.chapterCSS&&Object(a["c"])(this.bookID).then((function(e){if(200==e.data.code){t.chapterCSS=e.data.result,t.chapterCSS=".chapterContiner "+t.chapterCSS.replace(/}/gi,"}.chapterContainer "),t.chapterCSS=t.chapterCSS.replace(/font-size:.{3,8};/gi,""),t.chapterCSS+=" a {pointer-events:none;}",t.chapterCSS=t.chapterCSS.replace(/\r|\n/gi,"");var n=document.getElementById("chapterCSS");null!=n&&n.parentNode.removeChild(n),t.CreateStyle(t.chapterCSS,"chapterCSS")}}))},getImgPath:function(t,e){var n=-1,i=-1;if(t.indexOf("../")<0&&e.indexOf("/")>0)return e=e.slice(0,e.lastIndexOf("/")),e+"/"+t;e=e.slice(0,e.lastIndexOf("/"));while(n=t.indexOf("../")>-1)t=t.slice(n+2,t.length),i=e.lastIndexOf("/"),e=e.slice(0,i);return i<0?t:e+"/"+t},handleHtml:function(t){var e=this;if(t=t.slice(t.indexOf("<body")),""!=this.position&&t.search(this.position)>-1){var n=t.slice(0,t.indexOf(this.position));n=n.slice(n.lastIndexOf("<")),t=n+t.slice(t.indexOf(this.position))}t.search(this.nextPosition)>=0&&""!==this.nextPosition&&this.nextPosition!=this.position&&(t=t.slice(0,t.indexOf(this.nextPosition)),t=t.slice(0,t.lastIndexOf(">")+1)),t=t.slice(0,t.indexOf("</body>"));var i=new RegExp(/(<img )([^>]*)(src=")([^"]*")([^>]*)(>)/,"g");return t=t.replace(i,(function(t,n,i,s,r,o,a){return r=e.getImgPath(r,e.content),n+i+'data-src="'+e.API_TO_GET_VIEW+e.bookID+"&href="+r+o+a})),t},toNextChapter:function(){var t=this.keyInContent+1;if(!(t>=this.contentList.length)){var e="";t+1<this.contentList.length&&(e=this.getPosition(this.contentList[t+1].url)),this.setContent(this.contentList[t].url),this.setKeyInContent(t),this.setPosition(this.nextPosition),this.setNextPosition(e)}},createBook:function(){var t={};return t.bookID=this.bookID,t.content=this.content,t.fileName=this.fileName,t.keyInContent=this.keyInContent,t.nextPosition=this.nextPosition,t.position=this.position,t},parsingBook:function(t){this.setBookID(t.bookID),this.setContent(t.content),this.setFileName(t.fileName),this.setKeyInContent(t.keyInContent),this.setNextPosition(t.nextPosition),this.setPosition(t.position)}}},x=S,b=(n("440a"),Object(f["a"])(x,r,o,!1,null,"9d654c9a",null)),k=b.exports,_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.menuVisible,expression:"menuVisible"}],staticClass:"readerControls"},[n("div",{staticClass:"readerControls_item readerControls_item1",class:{selected:3===t.menuShow},on:{click:function(e){return t.showSetting(3)}}},[n("span",{staticClass:"title"},[t._v("书签")])]),n("div",{staticClass:"readerControls_item readerControls_item2",class:{selected:2===t.menuShow},on:{click:function(e){return t.showSetting(2)}}},[n("span",{staticClass:"title"},[t._v("主题")])]),n("div",{staticClass:"readerControls_item readerControls_item3",class:{selected:1===t.menuShow},on:{click:function(e){return t.showSetting(1)}}},[n("span",{staticClass:"title"},[t._v("目录")])]),n("div",{staticClass:"readerControls_item readerControls_item4",class:{selected:0===t.menuShow},on:{click:function(e){return t.showSetting(0)}}},[n("router-link",{attrs:{to:"/self",tag:"span"}},[n("span",{staticClass:"title"},[t._v("回到书架")])])],1)])},w=[],I={mixins:[p["a"]],methods:{showSetting:function(t){this.setMenuShow(t)}}},y=I,O=(n("8812"),Object(f["a"])(y,_,w,!1,null,"74cddc0c",null)),E=O.exports,P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.menuVisible&&1===t.menuShow,expression:"menuVisible && menuShow === 1"}],staticClass:"content"},[n("div",{staticClass:"contentCatalog"},[n("ul",{staticClass:"contentCatalog_list"},t._l(t.contentList,(function(e,i){return n("li",{key:i,staticClass:"chapterItem",on:{click:function(n){return t.ContentToReader(e,i)}}},[n("div",{class:{listSelected:t.isCurrentContent(e.url)},attrs:{id:"aa"}},[t._v(" "+t._s(e.title)+" ")])])})),0)])])},T=[],L={mixins:[p["a"]],mounted:function(){this.init()},methods:{isCurrentContent:function(t){return this.content===t},setCurrentComponentHide:function(){this.setCurrentComponent(null)},init:function(){var t=this;this.setContentList([]),Object(a["d"])(this.bookID).then((function(e){null!=e.data.result?(t.getJsonList(e.data.result.children),""==t.content&&(t.setContent(t.contentList[0].url),t.setNextPosition(t.getPosition(t.contentList[1].url)))):t.setContentList([])}))},getJsonList:function(t){for(var e=0;e<t.length;e++)this.contentList.push({title:t[e].title,url:t[e].url}),t[e].children.length>0&&this.getJsonList(t[e].children)},ContentToReader:function(t,e){if(""!=t.url){this.key=e;var n=this.getPosition(t.url),i="";e+1<this.contentList.length&&(i=this.getPosition(this.contentList[e+1].url)),this.content!=t.url&&(this.setContent(t.url),this.setPosition(n),this.setNextPosition(i),this.setKeyInContent(e)),this.setMenuShowOrHide()}}}},N=L,z=(n("aedd"),Object(f["a"])(N,P,T,!1,null,"30fee51c",null)),R=z.exports,$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.menuVisible&&2===t.menuShow,expression:"menuVisible && menuShow === 2"}],staticClass:"themeControl"},[n("div",{staticClass:"themeContainer"},[n("div",{staticClass:"theme theme-dark",class:{currentTheme:t.isCurrentTheme("dark")},on:{click:function(e){return t.setCurrentTheme("dark")}}}),n("div",{staticClass:"theme theme-light",class:{currentTheme:t.isCurrentTheme("light")},on:{click:function(e){return t.setCurrentTheme("light")}}})]),n("div",{staticClass:"fontSize"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.zitiSize,expression:"zitiSize"}],staticClass:"fontSizeValue",attrs:{type:"range",max:"34",min:"10",step:"6"},domProps:{value:t.zitiSize},on:{__r:function(e){t.zitiSize=e.target.value}}})])])},D=[],A={mixins:[p["a"]],data:function(){return{currentTheme:""}},mounted:function(){var t=g.a.get("theme");null!=t?this.setCurrentTheme(t):(t="light",this.setCurrentTheme(t)),this.currentTheme=t},computed:{zitiSize:{get:function(){return this.fontSize},set:function(t){this.setFontSize(t)}}},methods:{setCurrentTheme:function(t){if(t!==this.currentTheme){var e=document.getElementById("themeStyle");null!=e&&e.parentNode.removeChild(e),"dark"===t?this.CreateStyle(this.THEME_DARK,"themeStyle"):this.CreateStyle(this.THEME_LIGHT,"themeStyle"),this.currentTheme=t,g.a.set("theme",t)}},isCurrentTheme:function(t){return this.currentTheme===t}}},H=A,M=(n("be7b"),Object(f["a"])(H,$,D,!1,null,"7327d6bc",null)),j=M.exports,B={mixins:[p["a"]],components:{bookReader:k,bookMenu:E,bookContent:R,bookTheme:j},destroyed:function(){this.setBookID(""),this.setContent(""),this.setPosition(""),this.setNextPosition(""),this.setContentList([]),this.setKeyInContent(0)}},J=B,V=(n("3e13"),Object(f["a"])(J,i,s,!1,null,"0c27c816",null));e["default"]=V.exports},a10b:function(t,e,n){},aedd:function(t,e,n){"use strict";var i=n("c626"),s=n.n(i);s.a},baa5:function(t,e,n){var i=n("23e7"),s=n("e58c");i({target:"Array",proto:!0,forced:s!==[].lastIndexOf},{lastIndexOf:s})},be7b:function(t,e,n){"use strict";var i=n("4e85"),s=n.n(i);s.a},bf93:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"spinner"},[n("div",{staticClass:"rect1"}),n("div",{staticClass:"rect2"}),n("div",{staticClass:"rect3"}),n("div",{staticClass:"rect4"}),n("div",{staticClass:"rect5"})])}],r=(n("5f65"),n("2877")),o={},a=Object(r["a"])(o,i,s,!1,null,"230c0e8e",null);e["a"]=a.exports},c626:function(t,e,n){},c766:function(t,e,n){},ccbf:function(t,e,n){"use strict";var i=n("4ac0"),s=n.n(i);s.a},e58c:function(t,e,n){"use strict";var i=n("fc6a"),s=n("a691"),r=n("50c4"),o=n("a640"),a=n("ae40"),c=Math.min,l=[].lastIndexOf,u=!!l&&1/[1].lastIndexOf(1,-0)<0,h=o("lastIndexOf"),f=a("indexOf",{ACCESSORS:!0,1:0}),d=u||!h||!f;t.exports=d?function(t){if(u)return l.apply(this,arguments)||0;var e=i(this),n=r(e.length),o=n-1;for(arguments.length>1&&(o=c(o,s(arguments[1]))),o<0&&(o=n+o);o>=0;o--)if(o in e&&e[o]===t)return o||0;return-1}:l}}]);
//# sourceMappingURL=chunk-61fba51c.786cfe32.js.map