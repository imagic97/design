(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e1602bfa"],{"07b4":function(t,e,n){"use strict";var i=n("63f9"),s=n.n(i);s.a},"1a83":function(t,e,n){},"25f0":function(t,e,n){"use strict";var i=n("6eeb"),s=n("825a"),r=n("d039"),o=n("ad6d"),a="toString",c=RegExp.prototype,l=c[a],u=r((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),h=l.name!=a;(u||h)&&i(RegExp.prototype,a,(function(){var t=s(this),e=String(t.source),n=t.flags,i=String(void 0===n&&t instanceof RegExp&&!("flags"in c)?o.call(t):n);return"/"+e+"/"+i}),{unsafe:!0})},"3e13":function(t,e,n){"use strict";var i=n("1a83"),s=n.n(i);s.a},"44e7":function(t,e,n){var i=n("861d"),s=n("c6b6"),r=n("b622"),o=r("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==s(t))}},"46ee":function(t,e,n){},"4d63":function(t,e,n){var i=n("83ab"),s=n("da84"),r=n("94ca"),o=n("7156"),a=n("9bf2").f,c=n("241c").f,l=n("44e7"),u=n("ad6d"),h=n("9f7f"),f=n("6eeb"),d=n("d039"),v=n("69f3").set,p=n("2626"),m=n("b622"),C=m("match"),g=s.RegExp,S=g.prototype,x=/a/g,b=/a/g,_=new g(x)!==x,w=h.UNSUPPORTED_Y,k=i&&r("RegExp",!_||w||d((function(){return b[C]=!1,g(x)!=x||g(b)==b||"/a/i"!=g(x,"i")})));if(k){var y=function(t,e){var n,i=this instanceof y,s=l(t),r=void 0===e;if(!i&&s&&t.constructor===y&&r)return t;_?s&&!r&&(t=t.source):t instanceof y&&(r&&(e=u.call(t)),t=t.source),w&&(n=!!e&&e.indexOf("y")>-1,n&&(e=e.replace(/y/g,"")));var a=o(_?new g(t,e):g(t,e),i?this:S,y);return w&&n&&v(a,{sticky:n}),a},E=function(t){t in y||a(y,t,{configurable:!0,get:function(){return g[t]},set:function(e){g[t]=e}})},O=c(g),I=0;while(O.length>I)E(O[I++]);S.constructor=y,y.prototype=S,f(s,"RegExp",y)}p("RegExp")},"4d92":function(t,e,n){"use strict";var i=n("6560"),s=n.n(i);s.a},5319:function(t,e,n){"use strict";var i=n("d784"),s=n("825a"),r=n("7b0b"),o=n("50c4"),a=n("a691"),c=n("1d80"),l=n("8aa5"),u=n("14c3"),h=Math.max,f=Math.min,d=Math.floor,v=/\$([$&'`]|\d\d?|<[^>]*>)/g,p=/\$([$&'`]|\d\d?)/g,m=function(t){return void 0===t?t:String(t)};i("replace",2,(function(t,e,n,i){var C=i.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,g=i.REPLACE_KEEPS_$0,S=C?"$":"$0";return[function(n,i){var s=c(this),r=void 0==n?void 0:n[t];return void 0!==r?r.call(n,s,i):e.call(String(s),n,i)},function(t,i){if(!C&&g||"string"===typeof i&&-1===i.indexOf(S)){var r=n(e,t,this,i);if(r.done)return r.value}var c=s(t),d=String(this),v="function"===typeof i;v||(i=String(i));var p=c.global;if(p){var b=c.unicode;c.lastIndex=0}var _=[];while(1){var w=u(c,d);if(null===w)break;if(_.push(w),!p)break;var k=String(w[0]);""===k&&(c.lastIndex=l(d,o(c.lastIndex),b))}for(var y="",E=0,O=0;O<_.length;O++){w=_[O];for(var I=String(w[0]),L=h(f(a(w.index),d.length),0),P=[],T=1;T<w.length;T++)P.push(m(w[T]));var z=w.groups;if(v){var R=[I].concat(P,L,d);void 0!==z&&R.push(z);var N=String(i.apply(void 0,R))}else N=x(I,d,L,P,z,i);L>=E&&(y+=d.slice(E,L)+N,E=L+I.length)}return y+d.slice(E)}];function x(t,n,i,s,o,a){var c=i+t.length,l=s.length,u=p;return void 0!==o&&(o=r(o),u=v),e.call(a,u,(function(e,r){var a;switch(r.charAt(0)){case"$":return"$";case"&":return t;case"`":return n.slice(0,i);case"'":return n.slice(c);case"<":a=o[r.slice(1,-1)];break;default:var u=+r;if(0===u)return e;if(u>l){var h=d(u/10);return 0===h?e:h<=l?void 0===s[h-1]?r.charAt(1):s[h-1]+r.charAt(1):e}a=s[u-1]}return void 0===a?"":a}))}}))},"5f65":function(t,e,n){"use strict";var i=n("46ee"),s=n.n(i);s.a},"63f9":function(t,e,n){},6547:function(t,e,n){var i=n("a691"),s=n("1d80"),r=function(t){return function(e,n){var r,o,a=String(s(e)),c=i(n),l=a.length;return c<0||c>=l?t?"":void 0:(r=a.charCodeAt(c),r<55296||r>56319||c+1===l||(o=a.charCodeAt(c+1))<56320||o>57343?t?a.charAt(c):r:t?a.slice(c,c+2):o-56320+(r-55296<<10)+65536)}};t.exports={codeAt:r(!1),charAt:r(!0)}},6560:function(t,e,n){},"6ed9":function(t,e,n){"use strict";var i=n("ae00"),s=n.n(i);s.a},7156:function(t,e,n){var i=n("861d"),s=n("d2bb");t.exports=function(t,e,n){var r,o;return s&&"function"==typeof(r=e.constructor)&&r!==n&&i(o=r.prototype)&&o!==n.prototype&&s(t,o),t}},"8aa5":function(t,e,n){"use strict";var i=n("6547").charAt;t.exports=function(t,e,n){return e+(n?i(t,e).length:1)}},"9e8e":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"reading"},[n("book-reader"),n("book-menu"),n("book-content"),n("book-theme")],1)},s=[],r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"renderTargetContainer",on:{click:function(e){return t.setMenuShowOrHide()}}},[n("loading",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}]}),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.isLoading,expression:"!isLoading"}],staticClass:"chapterContainer"},[n("reader-context",{attrs:{responseHtml:t.responseHtml,fontSize:t.fontSize}}),n("div",{staticClass:"nextChapterContainner"},[n("div",{staticClass:"nextChapter"},[""!=t.responseHtml&&this.keyInContent+1<this.contentList.length?n("button",{attrs:{type:"primary"},on:{click:function(e){return e.stopPropagation(),t.toNextChapter(e)}}},[t._v("下一章")]):t._e()])])],1),n("div")],1)},o=[],a=(n("c975"),n("baa5"),n("fb6a"),n("4d63"),n("ac1f"),n("25f0"),n("5319"),n("841c"),n("4ec3")),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"lazy-container",rawName:"v-lazy-container",value:{selector:"img"},expression:"{ selector: 'img' }"}],style:{fontSize:t.fontSize+"px"},attrs:{id:"text"},domProps:{innerHTML:t._s(t.responseHtml)}})},l=[],u={props:{responseHtml:String,fontSize:String}},h=u,f=(n("6ed9"),n("2877")),d=Object(f["a"])(h,c,l,!1,null,"3e390d0a",null),v=d.exports,p=n("bf93"),m=n("4e3c"),C={mixins:[m["a"]],components:{readerContext:v,loading:p["a"]},data:function(){return{isLoading:!0,responseHtml:"",chapterCSS:""}},watch:{content:function(){this.init()}},mounted:function(){this.init()},methods:{init:function(){var t=this;this.isLoading=!0,""==this.content&&this.contentList.length>0&&(this.setContent=this.contentLiset[0].url),""!=this.bookID&&""!=this.content&&Object(a["c"])(this.bookID,this.content).then((function(e){t.responseHtml=t.handleHtml(e.data),t.$nextTick((function(){t.isLoading=!1}))})),""==this.chapterCSS&&Object(a["a"])(this.bookID).then((function(e){if(200==e.data.code){t.chapterCSS=e.data.result,t.chapterCSS=".chapterContiner "+t.chapterCSS.replace(/}/gi,"}.chapterContainer "),t.chapterCSS=t.chapterCSS.replace(/font-size:.{3,8};/gi,""),t.chapterCSS+=" a {pointer-events:none;}",t.chapterCSS=t.chapterCSS.replace(/\r|\n/gi,"");var n=document.getElementById("chapterCSS");null!=n&&n.parentNode.removeChild(n),t.CreateStyle(t.chapterCSS,"chapterCSS")}}))},getImgPath:function(t,e){var n=-1,i=-1;if(t.indexOf("../")<0&&e.indexOf("/")>0)return e=e.slice(0,e.lastIndexOf("/")),e+"/"+t;e=e.slice(0,e.lastIndexOf("/"));while(n=t.indexOf("../")>-1)t=t.slice(n+2,t.length),i=e.lastIndexOf("/"),e=e.slice(0,i);return i<0?t:e+"/"+t},handleHtml:function(t){var e=this;if(t=t.slice(t.indexOf("<body")),""!=this.position&&t.search(this.position)>-1){var n=t.slice(0,t.indexOf(this.position));n=n.slice(n.lastIndexOf("<")),t=n+t.slice(t.indexOf(this.position))}t.search(this.nextPosition)>=0&&""!==this.nextPosition&&this.nextPosition!=this.position&&(t=t.slice(0,t.indexOf(this.nextPosition)),t=t.slice(0,t.lastIndexOf(">")+1)),t=t.slice(0,t.indexOf("</body>"));var i=new RegExp(/(<img )([^>]*)(src=")([^"]*")([^>]*)(>)/,"g");return t=t.replace(i,(function(t,n,i,s,r,o,a){return r=e.getImgPath(r,e.content),n+i+'data-src="'+e.API_TO_GET_VIEW+e.bookID+"&href="+r+o+a})),t},toNextChapter:function(){var t=this.keyInContent+1;if(!(t>=this.contentList.length)){var e="";t+1<this.contentList.length&&(e=this.getPosition(this.contentList[t+1].url)),this.setContent(this.contentList[t].url),this.setKeyInContent(t),this.setPosition(this.nextPosition),this.setNextPosition(e)}}}},g=C,S=(n("4d92"),Object(f["a"])(g,r,o,!1,null,"30b502cc",null)),x=S.exports,b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.menuVisible,expression:"menuVisible"}],staticClass:"readerControls"},[n("div",{staticClass:"readerControls_item readerControls_item1",class:{selected:3===t.menuShow},on:{click:function(e){return t.showSetting(3)}}},[n("span",{staticClass:"title"},[t._v("书签")])]),n("div",{staticClass:"readerControls_item readerControls_item2",class:{selected:2===t.menuShow},on:{click:function(e){return t.showSetting(2)}}},[n("span",{staticClass:"title"},[t._v("主题")])]),n("div",{staticClass:"readerControls_item readerControls_item3",class:{selected:1===t.menuShow},on:{click:function(e){return t.showSetting(1)}}},[n("span",{staticClass:"title"},[t._v("目录")])]),n("div",{staticClass:"readerControls_item readerControls_item4",class:{selected:0===t.menuShow},on:{click:function(e){return t.showSetting(0)}}},[n("router-link",{attrs:{to:"/self",tag:"span"}},[n("span",{staticClass:"title"},[t._v("回到书架")])])],1)])},_=[],w={mixins:[m["a"]],methods:{showSetting:function(t){this.setMenuShow(t)}}},k=w,y=(n("b1b2"),Object(f["a"])(k,b,_,!1,null,"70f6babb",null)),E=y.exports,O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.menuVisible&&1===t.menuShow,expression:"menuVisible && menuShow === 1"}],staticClass:"content"},[n("div",{staticClass:"contentCatalog"},[n("ul",{staticClass:"contentCatalog_list"},t._l(t.contentList,(function(e,i){return n("li",{key:i,staticClass:"chapterItem",on:{click:function(n){return t.ContentToReader(e,i)}}},[n("div",{class:{listSelected:t.isCurrentContent(e.url)},attrs:{id:"aa"}},[t._v(t._s(e.title))])])})),0)])])},I=[],L={mixins:[m["a"]],mounted:function(){this.init()},methods:{isCurrentContent:function(t){return this.content===t},setCurrentComponentHide:function(){this.setCurrentComponent(null)},init:function(){var t=this;this.setContentList([]),Object(a["b"])(this.bookID).then((function(e){null!=e.data.result?(t.getJsonList(e.data.result.children),""==t.content&&(t.setContent(t.contentList[0].url),t.setNextPosition(t.getPosition(t.contentList[1].url)))):t.setContentList([])}))},getJsonList:function(t){for(var e=0;e<t.length;e++)this.contentList.push({title:t[e].title,url:t[e].url}),t[e].children.length>0&&this.getJsonList(t[e].children)},ContentToReader:function(t,e){if(""!=t.url){this.key=e;var n=this.getPosition(t.url),i="";e+1<this.contentList.length&&(i=this.getPosition(this.contentList[e+1].url)),this.content!=t.url&&(this.setContent(t.url),this.setPosition(n),this.setNextPosition(i),this.setKeyInContent(e)),this.setMenuShowOrHide()}}}},P=L,T=(n("ee56"),Object(f["a"])(P,O,I,!1,null,"abbf19e2",null)),z=T.exports,R=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.menuVisible&&2===t.menuShow,expression:"menuVisible && menuShow === 2"}],staticClass:"themeControl"},[n("div",{staticClass:"themeContainer"},[n("div",{staticClass:"theme theme-dark",class:{currentTheme:t.isCurrentTheme("dark")},on:{click:function(e){return t.setCurrentTheme("dark")}}}),n("div",{staticClass:"theme theme-light",class:{currentTheme:t.isCurrentTheme("light")},on:{click:function(e){return t.setCurrentTheme("light")}}})]),n("div",{staticClass:"fontSize"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.zitiSize,expression:"zitiSize"}],staticClass:"fontSizeValue",attrs:{type:"range",max:"34",min:"10",step:"6"},domProps:{value:t.zitiSize},on:{__r:function(e){t.zitiSize=e.target.value}}})])])},N=[],$={mixins:[m["a"]],data:function(){return{currentTheme:"light"}},computed:{zitiSize:{get:function(){return this.fontSize},set:function(t){this.setFontSize(t)}}},methods:{setCurrentTheme:function(t){if(t!==this.currentTheme){var e=document.getElementById("themeStyle");null!=e&&e.parentNode.removeChild(e),"dark"===t?this.CreateStyle(this.THEME_DARK,"themeStyle"):this.CreateStyle(this.THEME_LIGHT,"themeStyle"),this.currentTheme=t}},isCurrentTheme:function(t){return this.currentTheme===t}}},A=$,H=(n("07b4"),Object(f["a"])(A,R,N,!1,null,"4489109c",null)),M=H.exports,j={mixins:[m["a"]],components:{bookReader:x,bookMenu:E,bookContent:z,bookTheme:M},destroyed:function(){this.setBookID(""),this.setContent(""),this.setPosition(""),this.setNextPosition(""),this.setContentList([]),this.setKeyInContent(0)}},D=j,V=(n("3e13"),Object(f["a"])(D,i,s,!1,null,"0c27c816",null));e["default"]=V.exports},a3c0:function(t,e,n){},ae00:function(t,e,n){},b1b2:function(t,e,n){"use strict";var i=n("a3c0"),s=n.n(i);s.a},baa5:function(t,e,n){var i=n("23e7"),s=n("e58c");i({target:"Array",proto:!0,forced:s!==[].lastIndexOf},{lastIndexOf:s})},bf93:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"spinner"},[n("div",{staticClass:"rect1"}),n("div",{staticClass:"rect2"}),n("div",{staticClass:"rect3"}),n("div",{staticClass:"rect4"}),n("div",{staticClass:"rect5"})])}],r=(n("5f65"),n("2877")),o={},a=Object(r["a"])(o,i,s,!1,null,"230c0e8e",null);e["a"]=a.exports},c221:function(t,e,n){},e58c:function(t,e,n){"use strict";var i=n("fc6a"),s=n("a691"),r=n("50c4"),o=n("a640"),a=n("ae40"),c=Math.min,l=[].lastIndexOf,u=!!l&&1/[1].lastIndexOf(1,-0)<0,h=o("lastIndexOf"),f=a("indexOf",{ACCESSORS:!0,1:0}),d=u||!h||!f;t.exports=d?function(t){if(u)return l.apply(this,arguments)||0;var e=i(this),n=r(e.length),o=n-1;for(arguments.length>1&&(o=c(o,s(arguments[1]))),o<0&&(o=n+o);o>=0;o--)if(o in e&&e[o]===t)return o||0;return-1}:l},ee56:function(t,e,n){"use strict";var i=n("c221"),s=n.n(i);s.a}}]);
//# sourceMappingURL=chunk-e1602bfa.1199ddbd.js.map