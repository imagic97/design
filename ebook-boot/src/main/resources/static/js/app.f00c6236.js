(function(t){function e(e){for(var o,s,c=e[0],a=e[1],u=e[2],f=0,h=[];f<c.length;f++)s=c[f],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&h.push(r[s][0]),r[s]=0;for(o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o]);l&&l(e);while(h.length)h.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],o=!0,c=1;c<n.length;c++){var a=n[c];0!==r[a]&&(o=!1)}o&&(i.splice(e--,1),t=s(s.s=n[0]))}return t}var o={},r={app:0},i=[];function s(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=o,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(n,o,function(e){return t[e]}.bind(null,o));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],a=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var l=a;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var o=n("85ec"),r=n.n(o);r.a},"03ef":function(t,e,n){},"1aaf":function(t,e,n){"use strict";var o=n("c6fe"),r=n.n(o);r.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("a026"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("reading")],1)},i=[],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"reading"}},[n("reader"),n("keep-alive",[n(t.currentComponent,{tag:"component"})],1)],1)},c=[],a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{key:t.content,staticClass:"renderTargetContainer",on:{click:function(e){return t.setCurrentComponentTxt()}}},[n("div",{staticClass:"chapterContainer"},[n("div",{directives:[{name:"lazy-container",rawName:"v-lazy-container",value:{selector:"img"},expression:"{ selector: 'img' }"}],style:{fontSize:t.fontSize+"px",lineHeight:1.8*t.fontSize+"px"},attrs:{id:"text"},domProps:{innerHTML:t._s(t.responseText)}}),n("div",{staticClass:"nextChapterContainner"},[n("div",{staticClass:"nextChapter"},[t.responseText?n("el-button",{attrs:{type:"primary"},on:{click:function(e){return e.stopPropagation(),t.toNextChapter(e)}}},[t._v("下一章")]):t._e()],1)])]),n("div")])},u=[],l=(n("c975"),n("fb6a"),n("4d63"),n("ac1f"),n("25f0"),n("5319"),n("841c"),n("bc3a")),f=n.n(l);function h(t,e){return f()({method:"GET",url:"/read/view",params:{file:t,href:e}})}function d(t){return f()({method:"GET",url:"/read/content",params:{file:t}})}function p(t){return f()({method:"GET",url:"/read/css",params:{file:t}})}n("a4d3"),n("4de4"),n("4160"),n("e439"),n("dbb4"),n("b64b"),n("159b");var m=n("ade3"),C=n("2f62"),S="/read/view?file=",v="/read/cover?file=",T="/read/css?file=";function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function O(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(Object(n),!0).forEach((function(e){Object(m["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var g={computed:O({},Object(C["c"])(["fileName","bookID","content","position","nextPosition","contentShow","contentList","menuShow","currentComponent","fontSize"])),data:function(){return{API_TO_GET_VIEW:S,API_TO_GET_COVER:v,API_TO_GET_CSS:T}},methods:O({},Object(C["b"])(["setFileName","setBookID","setContent","setPosition","setNextPosition","setContentShow","setContentList","setMenuShow","setCurrentComponent","setFontSize"]))},_={mixins:[g],data:function(){return{responseText:"",chapterCSS:""}},updated:function(){this.init()},mounted:function(){this.init()},methods:{setCurrentComponentTxt:function(){null==this.currentComponent?this.setCurrentComponent("readerControl"):this.setCurrentComponent(null)},init:function(){var t=this;""!=this.bookID&""!=this.content&&(h(this.bookID,this.content).then((function(e){t.responseText=t.letslazyload(t.handleText(e.data))})),p(this.bookID).then((function(e){if(200==e.data.code){t.chapterCSS=e.data.result,t.chapterCSS=".chapterContiner "+t.chapterCSS.replace(/}/gi,"}.chapterContainer "),t.chapterCSS=t.chapterCSS.replace(/\r\n/gi,"");var n=document.getElementById("chapterCSS");null!=n&&n.parentNode.removeChild(n),t.CreateStyle()}})))},letslazyload:function(t){var e=new RegExp(/(<img )([^>]*)(src=")([^"]*")([^>]*)(>)/,"g");return t=t.replace(e,(function(t,e,n,o,r,i,s){return e+n+'data-src="'+r+i+s})),t},CreateStyle:function(){var t=document.createElement("style");t.setAttribute("type","text/css"),t.setAttribute("id","chapterCSS"),t.innerText=this.chapterCSS,document.getElementsByTagName("head")[0].appendChild(t)},handleText:function(t){return t=t.slice(t.indexOf("<body")),""!=this.position&&t.search(this.position)>-1&&(t=t.slice(t.indexOf(this.position)-8)),t.search(this.nextPosition)>=0&&""!==this.nextPosition&&this.nextPosition!=this.position&&(t=t.slice(0,t.indexOf(this.nextPosition)-8)),t=t.slice(0,t.indexOf("</body>")),t.search('src="../')>-1?t=t.replace(/src="..\/Images\//gi,'src="'+this.API_TO_GET_VIEW+this.bookID+"&href="):t.search('src="')>-1&&(t=t.replace(/src="/gi,'src="'+this.API_TO_GET_VIEW+this.bookID+"&href=")),t},toNextChapter:function(){this.$message("da")}}},E=_,x=(n("1aaf"),n("2877")),k=Object(x["a"])(E,a,u,!1,null,"3bb8a0f4",null),y=k.exports,N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"readerControls"},[n("el-row",{attrs:{gutter:0}},[n("el-col",{attrs:{span:6}},[n("div",{staticClass:"readerControls_item readerControls_item1"},[n("span",{staticClass:"title"},[t._v("书签")])])]),n("el-col",{attrs:{span:6}},[n("div",{staticClass:"readerControls_item readerControls_item2",on:{click:function(e){return t.showTheme()}}},[n("span",{staticClass:"title"},[t._v("主题")])])]),n("el-col",{attrs:{span:6}},[n("div",{staticClass:"readerControls_item readerControls_item3",on:{click:function(e){return t.showContent()}}},[n("span",{staticClass:"title"},[t._v("目录")])])]),n("el-col",{attrs:{span:6}},[n("div",{staticClass:"readerControls_item readerControls_item4"},[n("span",{staticClass:"title"},[t._v("回到主页")])])])],1)],1)},w=[],I={mixins:[g],methods:{showContent:function(){this.setCurrentComponent("contentItem")},showTheme:function(){this.setCurrentComponent("theme")}}},P=I,j=(n("af72"),Object(x["a"])(P,N,w,!1,null,"6ac1f3d6",null)),z=j.exports,L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content"},[n("div",{staticClass:"contentCatalog"},[n("ul",{staticClass:"contentCatalog_list"},t._l(t.contentList,(function(e,o){return n("li",{key:o,staticClass:"chapterItem",on:{click:function(n){return t.ContentToReader(e,o)}}},[n("span",{class:{selected:t.isCurrentContent(e.url)}},[t._v(t._s(e.title))])])})),0)])])},D=[],A={mixins:[g],data:function(){return{key:""}},mounted:function(){this.init()},methods:{isCurrentContent:function(t){return this.content===t},setCurrentComponentHide:function(){this.setCurrentComponent(null)},init:function(){var t=this;d(this.bookID).then((function(e){null!=e.data.result?(t.getJsonList(e.data.result.children),""==t.content&&t.setContent(t.contentList[0].url)):t.contentList="目录为空哦"}))},getJsonList:function(t){for(var e=0;e<t.length;e++)this.contentList.push({title:t[e].title,url:t[e].url}),t[e].children.length>0&&this.getJsonList(t[e].children)},ContentToReader:function(t,e){if(""!=t.url){this.key=e;var n="",o="";t.url.search("#")>0&&(n=t.url.slice(t.url.indexOf("#")+1,t.url.length)),e+1<this.contentList.length&&this.contentList[e+1].url.search("#")>0&&(o=this.contentList[e+1].url.slice(this.contentList[e+1].url.indexOf("#")+1,this.contentList[e+1].url.length)),this.content!=t.url|this.position!=n&&(this.setContent(t.url),this.setPosition(n),this.setNextPosition(o)),this.setCurrentComponentHide()}}}},M=A,F=(n("8676"),Object(x["a"])(M,L,D,!1,null,"f89a0baa",null)),$=F.exports,B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"themeControl"},[n("div",[n("el-row",[n("el-col",{attrs:{span:12}},[n("div",{staticClass:"theme theme-dark",class:{currentTheme:t.isCurrentTheme("dark")},on:{click:function(e){return t.setCurrentTheme("dark")}}})]),n("el-col",{attrs:{span:12}},[n("div",{staticClass:"theme theme-light",class:{currentTheme:t.isCurrentTheme("light")},on:{click:function(e){return t.setCurrentTheme("light")}}})])],1)],1),n("div",{staticClass:"fontSize"},[n("el-slider",{attrs:{min:10,max:34,"show-tooltip":!1,step:6,"show-stops":"",marks:t.marks},model:{value:t.zitiSize,callback:function(e){t.zitiSize=e},expression:"zitiSize"}})],1)])},G=[];function H(t){var e=document.createElement("link");e.setAttribute("rel","stylesheet"),e.setAttribute("type","text/css"),e.setAttribute("href",t),document.getElementsByTagName("head")[0].appendChild(e)}function R(t){for(var e=document.getElementsByTagName("link"),n=e.length;n>=0;n--)e[n]&&null!=e[n].getAttribute("href")&&-1!==e[n].getAttribute("href").indexOf(t)&&e[n].parentNode.removeChild(e[n])}var W={mixins:[g],data:function(){return{currentTheme:"light",marks:{10:{style:{fontSize:"10px",color:"#1989FA"},label:this.$createElement("strong","A")},34:{style:{fontSize:"34px",color:"#1989FA"},label:this.$createElement("strong","A")}}}},computed:{zitiSize:{get:function(){return this.fontSize},set:function(t){this.setFontSize(t)}}},methods:{setCurrentTheme:function(t){"dark"===t?(R("theme/light.css"),H("theme/dark.css")):(R("theme/dark.css"),H("theme/light.css")),this.currentTheme=t},isCurrentTheme:function(t){return this.currentTheme===t}}},J=W,U=(n("9327"),Object(x["a"])(J,B,G,!1,null,"4d4952ae",null)),V=U.exports,K={mixins:[g],components:{readerControl:z,reader:y,contentItem:$,theme:V},data:function(){return{}}},X=K,Z=(n("8559"),Object(x["a"])(X,s,c,!1,null,"4c7fe0dc",null)),q=Z.exports,Q={name:"app",components:{reading:q}},Y=Q,tt=(n("034f"),Object(x["a"])(Y,r,i,!1,null,null,null)),et=tt.exports,nt={state:{fileName:"",bookID:"7.epub",content:"",position:"",nextPosition:"",contentShow:!1,contentList:[],menuShow:!1,currentComponent:"contentItem",fontSize:16},mutations:{SET_FILENAME:function(t,e){t.fileName=e},SET_BOOKID:function(t,e){t.bookID=e},SET_CONTENT:function(t,e){t.content=e},SET_POSITION:function(t,e){t.position=e},SET_NEXTPOSITION:function(t,e){t.nextPosition=e},SET_CONTENTSHOW:function(t,e){t.contentShow=e},SET_CONTENTLIST:function(t,e){t.contentList=e},SET_MENUSHOW:function(t,e){t.menuShow=e},SET_CURRENTCOMPONENT:function(t,e){t.currentComponent=e},SET_FONTSIZE:function(t,e){t.fontSize=e}}},ot=nt,rt={fileName:function(t){return t.book.fileName},bookID:function(t){return t.book.bookID},content:function(t){return t.book.content},position:function(t){return t.book.position},nextPosition:function(t){return t.book.nextPosition},contentShow:function(t){return t.book.contentShow},contentList:function(t){return t.book.contentList},menuShow:function(t){return t.book.menuShow},currentComponent:function(t){return t.book.currentComponent},fontSize:function(t){return t.book.fontSize}},it=rt,st={setFileName:function(t,e){var n=t.commit;return n("SET_FILENAME",e)},setBookID:function(t,e){var n=t.commit;return n("SET_BOOKID",e)},setContent:function(t,e){var n=t.commit;return n("SET_CONTENT",e)},setPosition:function(t,e){var n=t.commit;return n("SET_POSITION",e)},setNextPosition:function(t,e){var n=t.commit;return n("SET_NEXTPOSITION",e)},setContentShow:function(t,e){var n=t.commit;return n("SET_CONTENTSHOW",e)},setContentList:function(t,e){var n=t.commit;return n("SET_CONTENTLIST",e)},setMenuShow:function(t,e){var n=t.commit;return n("SET_MENUSHOW",e)},setCurrentComponent:function(t,e){var n=t.commit;return n("SET_CURRENTCOMPONENT",e)},setFontSize:function(t,e){var n=t.commit;return n("SET_FONTSIZE",e)}},ct=st;o["default"].use(C["a"]);var at=new C["a"].Store({modules:{book:ot},getters:it,actions:ct}),ut=n("caf9"),lt=n("5c96"),ft=n.n(lt);n("0fae");o["default"].config.productionTip=!1,o["default"].use(ft.a),o["default"].use(ut["a"],{error:n("c8e3"),loading:n("cf1c")}),new o["default"]({store:at,render:function(t){return t(et)}}).$mount("#app")},8559:function(t,e,n){"use strict";var o=n("d516"),r=n.n(o);r.a},"85ec":function(t,e,n){},8676:function(t,e,n){"use strict";var o=n("f678"),r=n.n(o);r.a},9327:function(t,e,n){"use strict";var o=n("03ef"),r=n.n(o);r.a},af72:function(t,e,n){"use strict";var o=n("c1ed"),r=n.n(o);r.a},c1ed:function(t,e,n){},c6fe:function(t,e,n){},c8e3:function(t,e,n){t.exports=n.p+"img/book.25180fbd.svg"},cf1c:function(t,e,n){t.exports=n.p+"img/loading.13e76c4e.gif"},d516:function(t,e,n){},f678:function(t,e,n){}});
//# sourceMappingURL=app.f00c6236.js.map