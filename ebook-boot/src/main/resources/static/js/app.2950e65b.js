(function(t){function e(e){for(var o,s,c=e[0],a=e[1],u=e[2],f=0,h=[];f<c.length;f++)s=c[f],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&h.push(r[s][0]),r[s]=0;for(o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o]);l&&l(e);while(h.length)h.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],o=!0,c=1;c<n.length;c++){var a=n[c];0!==r[a]&&(o=!1)}o&&(i.splice(e--,1),t=s(s.s=n[0]))}return t}var o={},r={app:0},i=[];function s(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=o,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(n,o,function(e){return t[e]}.bind(null,o));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],a=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var l=a;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var o=n("85ec"),r=n.n(o);r.a},"091c":function(t,e,n){},"26ed":function(t,e,n){"use strict";var o=n("6311"),r=n.n(o);r.a},"384c":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("a026"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("reading")],1)},i=[],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"reading"}},[n("reader",{attrs:{id:"reader"}}),n("reader-control",{attrs:{id:"readerControl"}}),n("contentItem",{directives:[{name:"show",rawName:"v-show",value:t.contentShow,expression:"contentShow"}],attrs:{id:"contentItem"}}),t.contentShow?n("div",{staticClass:"mask_contentShow",on:{click:function(e){return t.totleContentShow()}}}):t._e()],1)},c=[],a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{key:t.content,staticClass:"renderTargetContainer"},[n("div",{directives:[{name:"lazy-container",rawName:"v-lazy-container",value:{selector:"img"},expression:"{ selector: 'img'}"}],domProps:{innerHTML:t._s(t.responseText)}})])},u=[],l=(n("c975"),n("fb6a"),n("4d63"),n("ac1f"),n("25f0"),n("466d"),n("5319"),n("841c"),n("bc3a")),f=n.n(l);function h(t,e){return f()({method:"GET",url:"/read/view",params:{file:t,href:e}})}function d(t){return f()({method:"GET",url:"/read/content",params:{file:t}})}n("a4d3"),n("4de4"),n("4160"),n("e439"),n("dbb4"),n("b64b"),n("159b");var p=n("ade3"),m=n("2f62"),b="/read/view?file=",v="/read/cover?file=";function O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?O(Object(n),!0).forEach((function(e){Object(p["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var g={computed:_({},Object(m["c"])(["fileName","bookID","content","position","nextPosition","contentShow"])),data:function(){return{API_TO_GET_VIEW:b,API_TO_GET_COVER:v}},methods:_({},Object(m["b"])(["setFileName","setBookID","setContent","setPosition","setNextPosition","setContentShow"]))},T={mixins:[g],data:function(){return{responseText:"别着急，喝口茶慢慢等...",css:[]}},updated:function(){for(var t=0,e=this.css.length;t<e;t++)this.addCss(this.API_TO_GET_VIEW+this.bookID+"&href="+this.css[t]);this.init()},mounted:function(){this.init()},methods:{init:function(){var t=this;""!=this.bookID&""!=this.content&&h(this.bookID,this.content).then((function(e){t.resolveCss(e.data),t.responseText=t.letslazyload(t.handleText(e.data))}))},letslazyload:function(t){var e=new RegExp(/(<img )([^>]*)(src=")([^"]*")([^>]*)(>)/,"g");return t=t.replace(e,(function(t,e,n,o,r,i,s){return e+n+'data-src="'+r+i+s})),t},addCss:function(t){var e=document.createElement("link");e.setAttribute("rel","stylesheet"),e.setAttribute("type","text/css"),e.setAttribute("href",t),document.getElementsByTagName("head")[0].appendChild(e)},resolveCss:function(t){var e=/(?<=link.+href\s*="\W*)\w+.css/g;this.css=t.match(e)},handleText:function(t){return t=t.slice(t.indexOf("<body")),""!=this.position&&t.search(this.position)>-1&&(t=t.slice(t.indexOf(this.position)-8),t.search(this.nextPosition)>=0&&""!==this.nextPosition&&this.nextPosition!=this.position&&(t=t.slice(0,t.indexOf(this.nextPosition)-8))),t=t.slice(0,t.indexOf("</body>")),t.search('src="../')>-1?t=t.replace(/src="..\/Images\//gi,'src="'+this.API_TO_GET_VIEW+this.bookID+"&href="):t.search('src="')>-1&&(t=t.replace(/src="/gi,'src="'+this.API_TO_GET_VIEW+this.bookID+"&href=")),t},find:function(t,e,n){for(var o=t.indexOf(e),r=0;r<n;r++)o=t.indexOf(e,o+1);return o}}},C=T,w=(n("6aa7"),n("2877")),x=Object(w["a"])(C,a,u,!1,null,null,null),E=x.exports,S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"readerControls"},[n("div",{staticClass:"readerControls_item readerControls_item1",on:{click:function(e){return t.totleContentShow()}}},[n("span",{staticClass:"title"},[t._v("目录")])]),t._m(0),t._m(1)])},y=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"readerControls_item readerControls_item2",attrs:{href:"javascript:",title:"目录"}},[n("span",{staticClass:"title"},[t._v("主题")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"readerControls_item readerControls_item3",attrs:{href:"javascript:",title:"目录"}},[n("span",{staticClass:"title"},[t._v("字体")])])}],P={mixins:[g],methods:{totleContentShow:function(){this.setContentShow(!this.contentShow)}}},I=P,k=(n("5e9f"),Object(w["a"])(I,S,y,!1,null,"f498396a",null)),j=k.exports,N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"readerCatalog"}},[n("ul",{staticClass:"readerCatalog_list"},t._l(t.truthList,(function(e,o){return n("li",{key:o,staticClass:"chapterItem",on:{click:function(n){return t.ContentToReader(e,o)}}},[n("span",[t._v(t._s(e.title))])])})),0)])},D=[],L={mixins:[g],data:function(){return{key:"",contentList:"",truthList:[]}},mounted:function(){this.init()},methods:{init:function(){var t=this;d(this.bookID).then((function(e){t.contentList=e.data,null==t.contentList&&(t.contentList="目录为空哦"),t.getJsonList(t.contentList.children)}))},getJsonList:function(t){for(var e=0;e<t.length;e++)this.truthList.push({title:t[e].title,url:t[e].url}),t[e].children.length>0&&this.getJsonList(t[e].children)},ContentToReader:function(t,e){if(""!=t.url){this.key=e;var n="",o="";t.url.search("#")>0&&(n=t.url.slice(t.url.indexOf("#")+1,t.url.length),e+1<this.truthList.length&&this.truthList[e+1].url.search("#")>0&&(o=this.truthList[e+1].url.slice(t.url.indexOf("#")+1,t.url.length))),this.content!=t.url|this.position!=n&&(this.setContent(t.url),this.setPosition(n),this.setNextPosition(o)),this.setContentShow(!1)}}}},A=L,$=(n("26ed"),Object(w["a"])(A,N,D,!1,null,"1f3e6573",null)),G=$.exports,M={mixins:[g],components:{readerControl:j,reader:E,contentItem:G},methods:{totleContentShow:function(){this.setContentShow(!this.contentShow)}}},W=M,B=(n("dab4"),Object(w["a"])(W,s,c,!1,null,"5b3a94a1",null)),J=B.exports,V={name:"app",components:{reading:J}},z=V,F=(n("034f"),Object(w["a"])(z,r,i,!1,null,null,null)),R=F.exports,H={state:{fileName:"",bookID:"3.epub",content:"",position:"",nextPosition:"",contentShow:!1},mutations:{SET_FILENAME:function(t,e){t.fileName=e},SET_BOOKID:function(t,e){t.bookID=e},SET_CONTENT:function(t,e){t.content=e},SET_POSITION:function(t,e){t.position=e},SET_NEXTPOSITION:function(t,e){t.nextPosition=e},SET_CONTENTSHOW:function(t,e){t.contentShow=e}}},K=H,X={fileName:function(t){return t.book.fileName},bookID:function(t){return t.book.bookID},content:function(t){return t.book.content},position:function(t){return t.book.position},nextPosition:function(t){return t.book.nextPosition},contentShow:function(t){return t.book.contentShow}},q=X,Q={setFileName:function(t,e){var n=t.commit;return n("SET_FILENAME",e)},setBookID:function(t,e){var n=t.commit;return n("SET_BOOKID",e)},setContent:function(t,e){var n=t.commit;return n("SET_CONTENT",e)},setPosition:function(t,e){var n=t.commit;return n("SET_POSITION",e)},setNextPosition:function(t,e){var n=t.commit;return n("SET_NEXTPOSITION",e)},setContentShow:function(t,e){var n=t.commit;return n("SET_CONTENTSHOW",e)}},U=Q;o["a"].use(m["a"]);var Y=new m["a"].Store({modules:{book:K},getters:q,actions:U}),Z=n("caf9");o["a"].config.productionTip=!1,o["a"].use(Z["a"],{error:n("c8e3"),loading:n("cf1c")}),new o["a"]({store:Y,render:function(t){return t(R)}}).$mount("#app")},"5e9f":function(t,e,n){"use strict";var o=n("384c"),r=n.n(o);r.a},6311:function(t,e,n){},"6aa7":function(t,e,n){"use strict";var o=n("b495"),r=n.n(o);r.a},"85ec":function(t,e,n){},b495:function(t,e,n){},c8e3:function(t,e,n){t.exports=n.p+"img/book.25180fbd.svg"},cf1c:function(t,e,n){t.exports=n.p+"img/loading.13e76c4e.gif"},dab4:function(t,e,n){"use strict";var o=n("091c"),r=n.n(o);r.a}});
//# sourceMappingURL=app.2950e65b.js.map